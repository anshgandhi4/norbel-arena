:root {
  color-scheme: dark;
  --bg: #070d19;
  --bg-accent: #0f1a30;
  --bg-radial-a: rgba(85, 133, 208, 0.28);
  --bg-radial-b: rgba(52, 98, 180, 0.24);
  --panel: #111c31;
  --panel-muted: #17253f;
  --ink: #eaf1ff;
  --muted: #a2afc4;
  --border: #2f425f;
  --red: #e5374b;
  --blue: #2486ff;
  --neutral: #6f7d94;
  --assassin: #090d17;
  --accent: #59a0ff;
  --field-bg: #0d1729;
  --field-border: #3a4f6e;
  --button-bg: #2a4269;
  --button-ink: #e8f0ff;
  --button-danger: #c73843;
  --eyebrow-bg: #1e3f76;
  --eyebrow-ink: #e2ecff;
  --tile-bg: #0f182b;
  --tile-ink: #edf2ff;
  --tile-border: #405372;
  --tile-red-bg: #8e2934;
  --tile-red-ink: #ffe8eb;
  --tile-blue-bg: #1f5fbc;
  --tile-blue-ink: #e8f1ff;
  --tile-neutral-bg: #5b6780;
  --tile-neutral-ink: #f2f5ff;
  --tile-assassin-bg: #0b0f19;
  --tile-assassin-ink: #f3f6ff;
  --focus: #7cb1ff;
  --history-bg: #16233a;
  --history-border: #344862;
  --error-ink: #ffd5dc;
  --error-bg: #5d2029;
  --error-border: #8f3341;
  --result-border: #3b4f69;
  --seat-grid-bg: #111d32;
  --seat-red-bg: #6f1f2a;
  --seat-red-ink: #ffdce2;
  --seat-blue-bg: #1e4f9c;
  --seat-blue-ink: #dce8ff;
  --primary-grad-a: #2f85ff;
  --primary-grad-b: #1c5fd6;
  --table-border: #3a4d66;
  --card-shadow: 0 12px 35px rgba(2, 6, 23, 0.52);
  --link: #8cbdff;
  --mirrored-bg: #2f3950;
  --mirrored-border: #647693;
  --mirrored-ink: #d0d8e8;
  --toast-bg: #252a33;
  --toast-border: #7f8794;
  --toast-ink: #f4f6f8;
  --header-glass: rgba(15, 27, 48, 0.72);
}

[data-theme='light'] {
  color-scheme: light;
  --bg: #eef2f9;
  --bg-accent: #f8faff;
  --bg-radial-a: rgba(255, 255, 255, 0.95);
  --bg-radial-b: rgba(167, 197, 255, 0.42);
  --panel: #ffffff;
  --panel-muted: #f8fbff;
  --ink: #0f172a;
  --muted: #556178;
  --border: #d8e0ed;
  --red: #d84848;
  --blue: #2563eb;
  --neutral: #8c97a8;
  --assassin: #111827;
  --accent: #1d4ed8;
  --field-bg: #ffffff;
  --field-border: #c9d4e6;
  --button-bg: #0f172a;
  --button-ink: #ffffff;
  --button-danger: #7b1f1f;
  --eyebrow-bg: #dbeafe;
  --eyebrow-ink: #1e3a8a;
  --tile-bg: #ffffff;
  --tile-ink: #1c1814;
  --tile-border: #c8b9aa;
  --tile-red-bg: #f38d92;
  --tile-red-ink: #3f0f13;
  --tile-blue-bg: #82b0ff;
  --tile-blue-ink: #10284f;
  --tile-neutral-bg: #bcc5d4;
  --tile-neutral-ink: #1e2431;
  --tile-assassin-bg: #59657a;
  --tile-assassin-ink: #f7f9ff;
  --focus: #2f5a8d;
  --history-bg: #fffdf8;
  --history-border: #e2d8ca;
  --error-ink: #7b1f1f;
  --error-bg: #fee2e2;
  --error-border: #fecaca;
  --result-border: #ded1c1;
  --seat-grid-bg: #f8fbff;
  --seat-red-bg: #fee2e2;
  --seat-red-ink: #991b1b;
  --seat-blue-bg: #dbeafe;
  --seat-blue-ink: #1e3a8a;
  --primary-grad-a: #2563eb;
  --primary-grad-b: #1d4ed8;
  --table-border: #e3d8cb;
  --card-shadow: 0 12px 35px rgba(17, 24, 39, 0.08);
  --link: #2563eb;
  --mirrored-bg: #dbe3ef;
  --mirrored-border: #9aa9bf;
  --mirrored-ink: #3b4658;
  --toast-bg: #f3f4f6;
  --toast-border: #949aa4;
  --toast-ink: #111827;
  --header-glass: rgba(255, 255, 255, 0.74);
}

* {
  box-sizing: border-box;
}

html,
body {
  width: 100%;
  overflow-x: hidden;
}

body {
  position: relative;
  margin: 0;
  font-family: 'Avenir Next', 'Segoe UI', sans-serif;
  color: var(--ink);
  background:
    radial-gradient(circle at 8% 10%, var(--bg-radial-a) 0%, transparent 38%),
    radial-gradient(circle at 90% 12%, var(--bg-radial-b) 0%, transparent 34%),
    linear-gradient(180deg, var(--bg-accent) 0%, var(--bg) 100%);
  transition: background 200ms ease, color 200ms ease;
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background: url('../treehacks.png') center 52% / min(62vw, 760px) auto no-repeat;
  opacity: 0.06;
}

.app {
  --header-offset: 6.2rem;
  --page-gutter: clamp(0.8rem, 2vw, 1.5rem);
  --header-title-size: clamp(1.1rem, 1.65vw, 1.4rem);
  --header-nav-size: clamp(0.98rem, 1.46vw, 1.2rem);
  position: relative;
  z-index: 1;
  min-height: 100vh;
  width: min(1400px, 100%);
  margin: 0 auto;
  padding: 0 var(--page-gutter) 1.1rem;
}

.setup-page {
  display: block;
}

.setup-stack {
  display: grid;
  grid-template-columns: minmax(0, 2fr) minmax(0, 1fr);
  align-items: start;
  gap: 1rem;
  width: 100%;
}

.setup-stack > :only-child {
  grid-column: 1 / -1;
}

.setup-card {
  position: relative;
  width: 100%;
  background: color-mix(in srgb, var(--header-glass) 78%, transparent);
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: var(--card-shadow);
  backdrop-filter: blur(14px) saturate(1.08);
  -webkit-backdrop-filter: blur(14px) saturate(1.08);
  padding: 1.1rem;
  display: grid;
  gap: 0.95rem;
  min-width: 0;
}

.setup-card.wide {
  width: 100%;
}

.setup-hero {
  display: grid;
  gap: 0.2rem;
}

.setup-hero h1 {
  margin: 0;
  font-size: clamp(1.45rem, 2.4vw, 2rem);
}

.setup-hero p {
  margin: 0;
  color: var(--muted);
}

.eyebrow {
  display: inline-flex;
  width: fit-content;
  padding: 0.16rem 0.55rem;
  border-radius: 999px;
  background: var(--eyebrow-bg);
  color: var(--eyebrow-ink);
  font-size: 0.74rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  font-weight: 700;
}

.setup-inline {
  display: grid;
  gap: 0.65rem;
  grid-template-columns: repeat(4, minmax(0, 1fr));
}

.setup-card label,
.control-group label {
  display: grid;
  gap: 0.2rem;
  font-size: 0.95rem;
}

input,
select,
button {
  font: inherit;
}

input,
select {
  padding: 0.45rem;
  border-radius: 8px;
  border: 1px solid var(--field-border);
  background: var(--field-bg);
  color: var(--ink);
  width: 100%;
  min-width: 0;
}

select {
  text-overflow: ellipsis;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background-image:
    linear-gradient(45deg, transparent 50%, var(--muted) 50%),
    linear-gradient(135deg, var(--muted) 50%, transparent 50%);
  background-position:
    calc(100% - 1.15rem) calc(50% + 0.05rem),
    calc(100% - 0.78rem) calc(50% + 0.05rem);
  background-size: 0.38rem 0.38rem, 0.38rem 0.38rem;
  background-repeat: no-repeat;
  padding-right: 2.15rem;
}

button {
  border: 1px solid transparent;
  border-radius: 10px;
  padding: 0.58rem 0.78rem;
  background: var(--button-bg);
  color: var(--button-ink);
  cursor: pointer;
  font-weight: 600;
  transition: border-color 140ms ease, filter 140ms ease, background 140ms ease;
}

button:disabled {
  opacity: 0.45;
  cursor: not-allowed;
}

button.danger {
  background: var(--button-danger);
}

.app-title {
  margin: 0;
  font-size: var(--header-title-size);
  letter-spacing: 0.01em;
}

.app-title-link {
  display: inline-flex;
  align-items: center;
  color: inherit;
  text-decoration: none;
}

.app-title-link:hover {
  color: var(--link);
}

.app-logo {
  display: block;
  height: clamp(1.26rem, 2.1vw, 1.63rem);
  width: auto;
}

.app-header {
  position: sticky;
  top: 0;
  width: 100vw;
  margin-inline: calc(50% - 50vw);
  z-index: 60;
  margin-bottom: 0.95rem;
  /* border-bottom: 1px solid color-mix(in srgb, var(--border) 82%, transparent); */
  background: color-mix(in srgb, var(--header-glass) 78%, transparent);
  backdrop-filter: blur(14px) saturate(1.08);
  -webkit-backdrop-filter: blur(14px) saturate(1.08);
  box-shadow: 0 8px 22px rgba(4, 10, 24, 0.24);
}

@supports (width: 100dvw) {
  .app-header {
    width: 100dvw;
    margin-inline: calc(50% - 50dvw);
  }
}

.app-header-inner {
  position: relative;
  width: min(1400px, 100vw);
  min-height: 4.5rem;
  margin: 0 auto;
  padding: 0.66rem var(--page-gutter);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.8rem;
}

.app-header-brand {
  position: relative;
  z-index: 1;
  margin-left: clamp(0.28rem, 0.8vw, 0.6rem);
}

.app-header-center {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  display: inline-flex;
  justify-content: center;
  align-items: center;
  max-width: min(56vw, 700px);
  white-space: nowrap;
}

.app-header-center-label {
  font-size: var(--header-nav-size);
  font-weight: 400;
  line-height: 1.1;
}

.app-header-links {
  display: inline-flex;
  align-items: center;
  gap: 0.55rem;
}

.app-header-center .header-link {
  font-size: var(--header-nav-size);
  font-weight: 400;
  line-height: 1.1;
}

.app-header-actions {
  position: relative;
  z-index: 1;
  display: flex;
  gap: 0.6rem;
  align-items: center;
  margin-right: clamp(0.3rem, 0.7vw, 0.55rem);
}

.pro-header-button {
  display: inline-flex;
  align-items: center;
  gap: 0.46rem;
  border-radius: 999px;
  border: 1px solid rgba(171, 147, 255, 0.5);
  background: linear-gradient(135deg, #4b3f91 0%, #3f367f 100%);
  color: #ebe7ff;
  text-decoration: none;
  font-family: inherit;
  font-weight: 400;
  font-size: var(--header-nav-size);
  line-height: 1;
  padding: 0.52rem 1rem;
  transition: filter 140ms ease, border-color 140ms ease;
}

.pro-header-button svg {
  width: 1.2rem;
  height: 1.2rem;
}

.pro-header-button:hover {
  filter: brightness(1.06);
  border-color: rgba(195, 179, 255, 0.72);
}

.theme-toggle {
  background: transparent;
  color: var(--ink);
  border-color: var(--border);
}

.theme-toggle.icon-toggle {
  width: 2.4rem;
  height: 2.4rem;
  padding: 0;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 0;
}

.theme-toggle.icon-toggle svg {
  width: 1.2rem;
  height: 1.2rem;
}

.theme-toggle:hover:not(:disabled) {
  border-color: var(--focus);
}

.match-id-label {
  margin: 0;
}

.header-link {
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  padding: 0.16rem 0.18rem;
  color: var(--ink);
  background: transparent;
  font-weight: 600;
}

.header-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.layout {
  display: grid;
  grid-template-columns: minmax(0, 5fr) minmax(0, 3fr);
  gap: clamp(1.3rem, 3vw, 2.2rem);
  align-items: start;
}

.board-column {
  display: grid;
  gap: 0.7rem;
}

.board {
  display: grid;
  gap: 0.38rem;
  width: 100%;
  aspect-ratio: 5 / 3;
  align-content: stretch;
  justify-content: stretch;
  grid-auto-rows: minmax(0, 1fr);
}

.replay-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.6rem;
}

.replay-actions {
  display: flex;
  gap: 0.35rem;
}

.board-actions {
  display: flex;
  justify-content: center;
  width: 100%;
}

.board-new-match-button {
  font-size: 1.03rem;
  padding: 0.72rem 1.45rem;
  min-width: min(18rem, 86%);
}

.tile {
  min-height: 0;
  border-radius: 9px;
  border: 1px solid var(--tile-border);
  padding: 0.4rem;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  background: var(--tile-bg);
  color: var(--tile-ink);
}

.tile.hinted.red,
.tile.revealed.red {
  background: var(--tile-red-bg);
  color: var(--tile-red-ink);
}

.tile.hinted.blue,
.tile.revealed.blue {
  background: var(--tile-blue-bg);
  color: var(--tile-blue-ink);
}

.tile.hinted.neutral,
.tile.revealed.neutral {
  background: var(--tile-neutral-bg);
  color: var(--tile-neutral-ink);
}

.tile.hinted.assassin,
.tile.revealed.assassin {
  background: var(--tile-assassin-bg);
  color: var(--tile-assassin-ink);
}

.tile.clickable {
  outline: 2px solid var(--focus);
}

.word {
  font-weight: 650;
  letter-spacing: 0.02em;
  font-size: clamp(0.8rem, 1.15vw, 0.98rem);
  line-height: 1.12;
  text-wrap: balance;
}

.sidebar {
  display: grid;
  gap: 0.8rem;
  align-content: start;
}

.control-group {
  display: grid;
  gap: 0.75rem;
  justify-items: center;
  text-align: center;
}

.control-group label {
  width: min(100%, 18rem);
  text-align: left;
}

.control-group button {
  min-width: 9.8rem;
}

.control-group .give-clue-action {
  margin-top: 0.3rem;
}

.control-help {
  margin: 0;
  color: var(--muted);
}

.card {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 0.8rem;
  min-width: 0;
}

.panel h3 {
  margin: 0 0 0.65rem;
}

.panel dl {
  margin: 0;
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 0.25rem 0.4rem;
}

.panel dt {
  color: var(--muted);
}

.history-list {
  margin: 0;
  padding-left: 0;
  list-style: none;
  display: grid;
  gap: 0.45rem;
  max-height: 280px;
  overflow: auto;
}

.history-list li {
  border: 1px solid var(--history-border);
  border-radius: 8px;
  padding: 0.4rem;
  background: var(--history-bg);
}

.history-list li.active {
  border-color: var(--focus);
  box-shadow: inset 0 0 0 1px var(--focus);
}

.history-top {
  display: flex;
  justify-content: space-between;
  color: var(--muted);
  font-size: 0.78rem;
}

.history-body {
  font-size: 0.85rem;
  white-space: pre-wrap;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, 'Liberation Mono', monospace;
  line-height: 1.35;
}

.history-model-response {
  margin: 0.45rem 0 0;
  padding: 0.45rem;
  border: 1px solid var(--history-border);
  border-radius: 8px;
  background: var(--history-bg);
  font-size: 0.72rem;
  line-height: 1.25;
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  max-height: 180px;
  overflow: auto;
}

.link-button {
  background: transparent;
  color: var(--link);
  padding: 0;
  border-radius: 0;
}

.link-button:disabled {
  color: var(--muted);
}

.error-text,
.error-banner {
  color: var(--error-ink);
}

.error-banner {
  background: var(--error-bg);
  border: 1px solid var(--error-border);
  border-radius: 8px;
  padding: 0.45rem;
  margin-bottom: 0.7rem;
}

.result-box {
  margin-top: 0.7rem;
  border-top: 1px solid var(--result-border);
  padding-top: 0.6rem;
}

.seat-grid {
  display: grid;
  grid-template-columns: minmax(0, 1.25fr) minmax(0, 1fr) minmax(0, 1.95fr);
  gap: 0.45rem;
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 0.55rem;
  background: var(--seat-grid-bg);
}

.seat-head {
  font-size: 0.76rem;
  color: var(--muted);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.seat-cell {
  display: flex;
  align-items: center;
  min-width: 0;
}

.seat-cell.mirrored-seat select:disabled {
  opacity: 1;
  background: var(--mirrored-bg);
  border-color: var(--mirrored-border);
  color: var(--mirrored-ink);
}

.seat-label {
  display: inline-flex;
  width: fit-content;
  border-radius: 999px;
  padding: 0.2rem 0.55rem;
  font-size: 0.8rem;
  font-weight: 700;
}

.seat-label.red {
  background: var(--seat-red-bg);
  color: var(--seat-red-ink);
}

.seat-label.blue {
  background: var(--seat-blue-bg);
  color: var(--seat-blue-ink);
}

.inline-fields {
  display: flex;
  gap: 0.35rem;
  width: 100%;
  min-width: 0;
}

.inline-fields > * {
  flex: 1;
  min-width: 0;
}

.primary-button {
  background: linear-gradient(135deg, var(--primary-grad-a), var(--primary-grad-b));
  box-shadow: 0 8px 20px color-mix(in srgb, var(--primary-grad-a) 35%, transparent);
}

.primary-button:hover:not(:disabled) {
  filter: brightness(1.03);
}

.toast-banner {
  position: fixed;
  top: calc(var(--header-offset) + 0.35rem);
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
  max-width: min(30rem, calc(100vw - 2rem));
  border: 1px solid var(--toast-border);
  background: var(--toast-bg);
  color: var(--toast-ink);
  border-radius: 14px;
  box-shadow: var(--card-shadow);
  padding: 0.6rem 0.8rem;
}

.muted {
  color: var(--muted);
}

.report-block + .report-block {
  margin-top: 0.6rem;
}

.report-block h4 {
  margin: 0.2rem 0 0.3rem;
}

.report-table-wrap {
  overflow: auto;
}

.report-table {
  border-collapse: collapse;
  width: 100%;
  font-size: 0.86rem;
}

.report-table th,
.report-table td {
  border: 1px solid var(--table-border);
  padding: 0.28rem 0.36rem;
  text-align: left;
}

.leaderboard-page {
  display: grid;
  gap: 0.8rem;
  align-content: start;
}

.leaderboard-hero {
  display: grid;
  gap: 0.24rem;
  padding: 0.72rem 0.8rem;
}

.leaderboard-hero h2 {
  margin: 0;
  font-size: clamp(1.25rem, 1.8vw, 1.55rem);
}

.leaderboard-hero p {
  margin: 0;
}

.leaderboard-grid {
  display: grid;
  gap: 0.8rem;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  align-items: start;
}

.leaderboard-card {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 0.8rem;
  min-width: 0;
}

.leaderboard-card-head {
  display: flex;
  justify-content: space-between;
  gap: 0.8rem;
  align-items: baseline;
  margin-bottom: 0.4rem;
}

.leaderboard-card-head h3,
.leaderboard-card-head p {
  margin: 0;
}

.leaderboard-status {
  margin: 0;
}

.leaderboard-table-wrap {
  overflow: auto;
}

.leaderboard-table {
  border-collapse: collapse;
  width: 100%;
  font-size: 0.9rem;
}

.leaderboard-table th,
.leaderboard-table td {
  border: 1px solid var(--table-border);
  padding: 0.3rem 0.36rem;
  text-align: left;
  white-space: nowrap;
}

.leaderboard-table th {
  color: var(--muted);
  font-size: 0.8rem;
  letter-spacing: 0.03em;
  text-transform: uppercase;
}

.leaderboard-table td:nth-child(1),
.leaderboard-table td:nth-child(3),
.leaderboard-table td:nth-child(4),
.leaderboard-table td:nth-child(6),
.leaderboard-table td:nth-child(7) {
  color: var(--muted);
}

.wavelength-transcript {
  min-height: 18rem;
}

.wavelength-pending {
  margin-bottom: 0.8rem;
  color: var(--muted);
}

.wavelength-history {
  margin: 0;
  padding-left: 1rem;
  display: grid;
  gap: 0.45rem;
}

@media (max-width: 1080px) {
  .setup-stack {
    grid-template-columns: 1fr;
  }

  .setup-inline {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .layout {
    grid-template-columns: 1fr;
  }

  .leaderboard-grid {
    grid-template-columns: 1fr;
  }

  .sidebar {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

@media (max-width: 760px) {
  .app {
    --page-gutter: 0.65rem;
    --header-offset: 8.4rem;
    --header-nav-size: clamp(0.93rem, 3.4vw, 1.14rem);
    padding: 0 var(--page-gutter) 0.8rem;
  }

  .setup-inline {
    grid-template-columns: 1fr;
  }

  .app-header-inner {
    min-height: auto;
    padding-top: 0.75rem;
    padding-bottom: 0.88rem;
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 0.35rem 0.5rem;
  }

  .app-header-actions {
    justify-self: end;
    margin-right: 0;
  }

  .app-header-center {
    position: static;
    transform: none;
    grid-column: 1 / -1;
    max-width: 100%;
    white-space: normal;
    justify-content: center;
  }

  .leaderboard-card-head {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.25rem;
  }

  .sidebar {
    grid-template-columns: 1fr;
  }

  .seat-grid {
    grid-template-columns: 1fr;
  }

  .seat-head {
    display: none;
  }

  .seat-cell {
    flex-direction: column;
    align-items: stretch;
  }

}
